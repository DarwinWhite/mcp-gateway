<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP Gateway - Servers (Test)</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/style.css') }}">
</head>
<body>
    <!-- Main Header -->
    <header class="main-header">
        <div class="logo">
            <img src="{{ url_for('static', path='/logo.png') }}" alt="MCP Gateway Logo" height="30"> <!-- Logo Image -->
            <span>MCP Gateway</span>
        </div>
        <div class="header-right"> <!-- Added back header-right -->
            <span class="user-display">User: {{ username }}</span>
            <form action="/logout" method="post" style="display: inline;">
                <button type="submit" class="logout-button">Logout</button>
            </form>
        </div>
    </header>

    <!-- Main Container (Sidebar + Content) -->
    <div class="container">
        <!-- Sidebar (Simplified) -->
        <aside class="sidebar">
            <h3>Status</h3>
             <ul>
                 <li><span>Discovered</span> <span>{{ services | length }}</span></li>
                 <!-- Add more status indicators later if needed -->
             </ul>
            <!-- Removed other filter/category lists -->
        </aside>

        <!-- Main Content Area -->
        <main class="content">
            <!-- Page Header Section (Simplified) -->
            <div class="page-header">
                 <h1>MCP Servers</h1>
                <!-- Removed breadcrumbs, description, social icons -->
            </div>

            <!-- Controls Section (Simplified) -->
            <div class="controls-area search-controls">
                <!-- Search Form -->
                <form action="/" method="get" class="search-bar">
                    <input type="search" name="query" placeholder="Search by name or description..." value="{{ request.query_params.get('query', '') }}">
                    <button type="submit">Search</button>
                </form>
            </div>

             <!-- Service Cards Section -->
            <div class="card-container">
                {% if services %}
                    {% for service in services %}
                    <div class="service-card">
                        <div class="card-header">
                            <h2>{{ service.display_name }}</h2>
                            <div class="header-right-items">
                                <span class="official-badge">official</span>
                                <span class="icons">‚òÅÔ∏è üíª üîÑ</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <p class="owner">Path: {{ service.path }}</p>
                            <div class="badges">
                                {% for tag in service.tags %}
                                <span class="badge">{{ tag }}</span>
                                {% endfor %}
                            </div>
                            <p class="description">
                                {{ service.description | default('No description provided.') }}
                            </p>
                            <form action="/toggle{{ service.path }}" method="post" class="toggle-form">
                                <label class="switch">
                                    <input type="checkbox" name="enabled" value="on" {% if service.is_enabled %}checked{% endif %} onchange="this.form.submit()">
                                    <span class="slider round"></span>
                                </label>
                                <span class="toggle-label">{{ 'Enabled' if service.is_enabled else 'Disabled' }}</span>
                            </form>
                            <a href="/edit{{ service.path }}" class="edit-button" style="margin-top: 10px;">Modify</a>
                        </div>
                        <div class="card-footer">
                            <span class="metadata">üïí Last updated: Just now (Simulated)</span>
                            <span class="metadata">üîß {{ service.num_tools }}</span>
                            <span class="metadata">‚≠ê {{ service.num_stars }}</span>
                            <div class="platform-icons">
                                 {% if service.is_python %}<span>üêç Python</span>{% endif %}
                                 <span>‚öñÔ∏è {{ service.license }}</span>
                                 <!-- Consider adding OS icons dynamically if needed -->
                                 <span>üêß</span> <span>Ô£ø</span> <span>ü™ü</span>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <p>No services found matching your query, or none registered. Try rescanning.</p>
                {% endif %}
            </div> <!-- end card-container -->

        </main> <!-- end content -->
    </div> <!-- end container -->

</body>
</html> 